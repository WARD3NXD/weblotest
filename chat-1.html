<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weblo - Chat</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <header class="header">
        <div class="container header-container">
            <a href="index.html" class="logo">Weblo.</a>
            <a href="#" class="btn btn-dark btn-sm">Sign In</a>
        </div>
    </header>

    <div class="chat-layout">
        <div class="chat-panel-left">
            <div class="chat-history">
                <div class="chat-message-user">
                    Create a website for my bakery called SweetCrust. We sell fresh pastries and custom cakes. Our
                    customers are local families and office workers. Make the tone warm and friendly, and focus on
                    helping customers place custom cake orders easily.
                </div>
                <div class="chat-message-system" style="margin-top: 24px; animation: fadeIn 0.5s ease-out;">
                    <!--div> <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px; color: #333;">Here is what we‚Äôll
                        do</h3></div>-->

                    <div class="plans-list">
                        <!-- System Analysis (Checked) -->
                        <div class="plan-item-single accepted" style="margin-bottom: 16px;">
                            <div class="plan-header-single">
                                <div class="plan-header-title">What the System Understands & Extracts</div>
                            </div>
                        </div>

                        <!-- Single Accordion Item -->
                        <div class="plan-item-single selected">
                            <div class="plan-header-single">
                                <div class="plan-header-title">Implementation Plan</div>
                            </div>
                            <div class="plan-details-single">

                                <div class="plan-group" id="static-step-1">
                                    <div class="plan-group-status"></div>
                                    <div class="plan-group-title">Brand Setup</div>
                                    <div class="plan-group-text">Apply SweetCrust name, warm tone, pastel colour theme
                                    </div>
                                    <div class="plan-group-text">Use soft rounded font pairing</div>
                                </div>

                                <div class="plan-group" id="static-step-2">
                                    <div class="plan-group-status"></div>
                                    <div class="plan-group-title">Homepage</div>
                                    <div class="plan-group-text">Hero message: ‚ÄúFreshly baked happiness, made just for
                                        you.‚Äù</div>
                                    <div class="plan-group-text">Highlight pastries + primary CTA for custom cake orders
                                    </div>
                                </div>

                                <div class="plan-group" id="static-step-3">
                                    <div class="plan-group-status"></div>
                                    <div class="plan-group-title">Menu Page</div>
                                    <div class="plan-group-text">Showcase pastries in simple categories</div>
                                    <div class="plan-group-text">Add a ‚ÄúMost Loved‚Äù section for families & office
                                        workers</div>
                                </div>

                                <div class="plan-group" id="static-step-4">
                                    <div class="plan-group-status"></div>
                                    <div class="plan-group-title">Custom Cake Order Page</div>
                                    <div class="plan-group-text">Guided form (size ‚Üí flavour ‚Üí decoration ‚Üí notes)</div>
                                    <div class="plan-group-text">Quick price estimate + preview card</div>
                                    <div class="plan-group-text">Pickup/delivery options</div>
                                </div>

                                <div class="plan-group" id="static-step-5">
                                    <div class="plan-group-status"></div>
                                    <div class="plan-group-title">Contact Page</div>
                                    <div class="plan-group-text">Location, timings, quick-call button</div>
                                    <div class="plan-group-text">Optional Google Maps embed</div>
                                </div>

                                <div class="plan-group" id="static-step-6">
                                    <div class="plan-group-status"></div>
                                    <div class="plan-group-title">Theme & Tone</div>
                                    <div class="plan-group-text">Friendly microcopy across all pages</div>
                                    <div class="plan-group-text">Warm visuals, pastel colours, cozy bakery mood</div>
                                    <!-- Palette -->
                                    <div class="plan-group-text palette-container">
                                        <div class="palette-header">
                                            <div class="palette-title">Palette 1</div>
                                            <div class="palette-refresh">‚Üª</div>
                                        </div>
                                        <div class="palette-swatches">
                                            <div class="swatch" style="background-color: #9E9E9E;"></div>
                                            <!-- Dark Gray -->
                                            <div class="swatch" style="background-color: #757575;"></div>
                                            <!-- Darker Gray -->
                                            <div class="swatch" style="background-color: #D6D6D6;"></div>
                                            <!-- Light Gray -->
                                            <div class="swatch" style="background-color: #E0E0E0;"></div>
                                            <!-- Lighter Gray -->
                                            <div class="swatch" style="background-color: #EEEEEE;"></div>
                                            <!-- Very Light Gray -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Select Plan Accordion (Initially Hidden) -->
                        <div class="plan-item-single" id="plan-selection-accordion"
                            style="display: none; margin-top: 16px;">
                            <div class="plan-header-single">
                                <div class="plan-header-title">Select a Plan</div>
                            </div>
                            <div class="plan-details-single">
                                <div style="padding: 16px;">
                                    <!-- Simple Plan Selection derived from wizard -->
                                    <div class="plans-list-chat"
                                        style="display: flex; flex-direction: column; gap: 12px;">

                                        <!-- Starter Plan -->
                                        <div class="plan-card selected" id="plan-starter"
                                            style="border: 2px solid #222; border-radius: 8px; padding: 12px; cursor: pointer; background: #fff;">
                                            <div
                                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                                <div style="font-weight: 700; font-size: 15px;">Starter</div>
                                                <div style="font-weight: 700;">$149</div>
                                            </div>
                                            <div style="font-size: 13px; color: #555; line-height: 1.4;">One-time build,
                                                5 pages, hosting included.</div>
                                        </div>

                                        <!-- Business Plan -->
                                        <div class="plan-card" id="plan-business"
                                            style="border: 1px solid #ddd; border-radius: 8px; padding: 12px; cursor: pointer; background: #fff;">
                                            <div
                                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                                <div style="font-weight: 700; font-size: 15px;">Business</div>
                                                <div style="font-weight: 700;">$39<span
                                                        style="font-size: 11px; font-weight: 400; color: #777;">/mo</span>
                                                </div>
                                            </div>
                                            <div style="font-size: 13px; color: #555; line-height: 1.4;">5 sites, source
                                                code export, priority support.</div>
                                        </div>

                                    </div>
                                    <div style="margin-top: 16px;">
                                        <button class="btn btn-dark btn-block" id="btn-confirm-plan"
                                            style="width: 100%;">Continue to Payment</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Payment Accordion (Initially Hidden) -->
                        <div class="plan-item-single" id="payment-accordion" style="display: none; margin-top: 16px;">
                            <div class="plan-header-single" id="payment-header">
                                <div class="plan-header-title">Payment Details</div>
                            </div>
                            <!-- Force expanded by default when shown? or managed by JS -->
                            <div class="plan-details-single" id="payment-details">
                                <div style="padding: 24px;">
                                    <div class="form-group">
                                        <label
                                            style="display: block; margin-bottom: 8px; font-size: 14px; font-weight: 500;">Email
                                            Address</label>
                                        <input type="email" class="form-control" id="chatPayEmail"
                                            placeholder="you@example.com"
                                            style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                                    </div>

                                    <div class="form-group" style="margin-top: 16px;">
                                        <label
                                            style="display: block; margin-bottom: 8px; font-size: 14px; font-weight: 500;">Card
                                            Details</label>
                                        <div
                                            style="border: 1px solid #ddd; border-radius: 6px; padding: 10px; display: flex; align-items: center; gap: 8px; background: #fff;">
                                            <span style="font-size: 20px;">üí≥</span>
                                            <input type="text" placeholder="Card number"
                                                style="border: none; outline: none; flex: 1; font-size: 14px;">
                                            <input type="text" placeholder="MM/YY"
                                                style="border: none; outline: none; width: 50px; font-size: 14px;">
                                            <input type="text" placeholder="CVC"
                                                style="border: none; outline: none; width: 40px; font-size: 14px;">
                                        </div>
                                    </div>

                                    <div class="form-group" style="margin-top: 16px;">
                                        <label
                                            style="display: block; margin-bottom: 8px; font-size: 14px; font-weight: 500;">Cardholder
                                            Name</label>
                                        <input type="text" class="form-control" placeholder="Name on card"
                                            style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                                    </div>

                                    <div
                                        style="margin-top: 20px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 600;">Starter Plan</div>
                                            <div style="font-size: 12px; color: #666;">Billed once</div>
                                        </div>
                                        <div style="font-size: 16px; font-weight: 600;">$199.00</div>
                                    </div>

                                    <button class="btn btn-dark btn-block" id="btn-pay-build" style="width: 100%;">Pay &
                                        Build Website</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Success Message (Hidden by default) -->
                    <div class="chat-message-system" id="success-message"
                        style="margin-top: 24px; animation: fadeIn 0.5s ease-out; display: none;">
                        <div style="font-size: 16px; font-weight: 600; color: #333; margin-bottom: 8px;">üéâ Your Website
                            Is Ready, SweetCrust!</div>
                        <div style="font-size: 14px; color: #444; line-height: 1.5; margin-bottom: 12px;">
                            Weblo AI has clarified your brand, filled details, optimized structure, and built a friendly
                            bakery website for families and office workers.
                            <br><br>
                            SweetCrust now has a complete, user-friendly online presence that helps customers explore
                            pastries and place custom cake orders effortlessly.
                            <br><br>
                            Want to refine anything? Just tell me what you‚Äôd like to adjust next
                        </div>
                    </div>

                </div>
            </div>
            <div class="chat-confirm-wrapper" id="confirm-wrapper">
                <div class="confirm-text">Do you like it?</div>
                <div class="confirm-actions">
                    <button class="btn btn-dark" id="btn-confirm">Confirm</button>
                    <button class="btn btn-light-gray" id="btn-doubts">Have doubts</button>
                </div>
            </div>

            <div class="chat-input-wrapper" id="input-wrapper" style="display: none;">
                <textarea class="chat-input" placeholder="Describe your website"></textarea>
                <div class="chat-input-actions">
                    <button class="btn-icon" title="Attach">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                    <button class="btn-icon btn-send" title="Send">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <line x1="22" y1="2" x2="11" y2="13" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                            <polygon points="22 2 15 22 11 13 2 9 22 2" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div class="chat-panel-right">
            <div class="placeholder-text">Illustrations</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const prompt = localStorage.getItem('weblo_prompt');
            if (prompt) {
                const userMessage = document.querySelector('.chat-message-user');
                if (userMessage) {
                    userMessage.textContent = prompt;
                }
                localStorage.removeItem('weblo_prompt');
            }

            // Accordion Logic
            // Accordion Logic
            const planHeader = document.querySelector('.plan-header-single');
            if (planHeader) {
                planHeader.addEventListener('click', () => {
                    planHeader.parentElement.classList.toggle('selected');
                });
            }

            // Have Doubts Interaction
            const btnDoubts = document.getElementById('btn-doubts');
            const confirmWrapper = document.getElementById('confirm-wrapper');
            const inputWrapper = document.getElementById('input-wrapper');
            const btnConfirm = document.getElementById('btn-confirm');

            if (btnDoubts && confirmWrapper && inputWrapper) {
                btnDoubts.addEventListener('click', () => {
                    confirmWrapper.style.display = 'none';
                    inputWrapper.style.display = 'block';
                });
            }

            // Execution Simulation
            // Execution Simulation
            // Flow: Implementation Plan -> Plan Selection -> Payment -> Build (Progress)
            const planSelectionAccordion = document.getElementById('plan-selection-accordion');
            const btnConfirmPlan = document.getElementById('btn-confirm-plan');
            const paymentAccordion = document.getElementById('payment-accordion');
            const btnPayBuild = document.getElementById('btn-pay-build');
            const successMsg = document.getElementById('success-message');
            const progressAccordion = document.getElementById('progress-accordion');

            // 1. Confirm Implementation Plan -> Show Select Plan
            if (btnConfirm) {
                btnConfirm.addEventListener('click', () => {
                    confirmWrapper.style.display = 'none';

                    // Close Impl Plan & Mark Accepted
                    // We assume the first plan-item-single inside visible list (excluding the top system one which is static)
                    // The "Here is what we'll do" item is selected.
                    const planItem = document.querySelector('.plan-item-single.selected');
                    if (planItem) {
                        planItem.classList.remove('selected');
                        planItem.classList.add('accepted');
                        const headerTitle = planItem.querySelector('.plan-header-title');
                        if (headerTitle) headerTitle.innerText = "Implementation plan accepted";
                    }

                    // Open Plan Selection
                    if (planSelectionAccordion) {
                        planSelectionAccordion.style.display = 'block';
                        setTimeout(() => {
                            planSelectionAccordion.classList.add('selected');
                        }, 50);
                    }
                });
            }

            // Plan Card Selection Logic (Mini)
            const planCards = document.querySelectorAll('.plan-card');
            planCards.forEach(card => {
                card.addEventListener('click', () => {
                    planCards.forEach(c => {
                        c.classList.remove('selected');
                        c.style.border = '1px solid #ddd';
                    });
                    card.classList.add('selected');
                    card.style.border = '2px solid #222';
                });
            });

            // 2. Confirm Plan Selection -> Show Payment
            if (btnConfirmPlan) {
                btnConfirmPlan.addEventListener('click', () => {
                    // Close Plan Selection & Mark Accepted
                    if (planSelectionAccordion) {
                        planSelectionAccordion.classList.remove('selected');
                        planSelectionAccordion.classList.add('accepted');
                        // Hide it completely to match screenshot? Or keep it? Screenshot doesn't show it.
                        // "No mate, we will show Plans first then ask for payment page"
                        // I'll keep it visible but closed for now, unless instructed to hide.
                    }

                    // Open Payment
                    if (paymentAccordion) {
                        paymentAccordion.style.display = 'block';
                        setTimeout(() => {
                            paymentAccordion.classList.add('selected');
                        }, 50);
                    }
                });
            }

            // 3. Pay -> Build Simulation
            if (btnPayBuild) {
                btnPayBuild.addEventListener('click', async () => {
                    const originalText = btnPayBuild.innerText;
                    btnPayBuild.innerText = 'Processing...';

                    await new Promise(r => setTimeout(r, 1000));

                    // Close Payment & Mark Paid
                    if (paymentAccordion) {
                        paymentAccordion.classList.remove('selected');
                        paymentAccordion.classList.add('accepted');
                        const payHeader = paymentAccordion.querySelector('.plan-header-title');
                        if (payHeader) payHeader.innerText = "Payment Completed";
                    }

                    // Hide Plan Selection if strictly following screenshot?
                    if (planSelectionAccordion) {
                        planSelectionAccordion.style.display = 'none';
                    }

                    // Start Simulation (Open Progress Accordion)
                    if (progressAccordion) {
                        progressAccordion.style.display = 'block';
                        setTimeout(() => {
                            progressAccordion.classList.add('selected');
                        }, 50);
                    }

                    const steps = [1, 2, 3, 4, 5, 6];

                    for (const stepId of steps) {
                        const stepEl = document.getElementById(`plan-step-${stepId}`);
                        if (!stepEl) continue;

                        const statusEl = stepEl.querySelector('.plan-group-status');

                        stepEl.classList.add('loading');
                        statusEl.innerHTML = '<div class="spinner"></div>';

                        await new Promise(r => setTimeout(r, 1500));

                        stepEl.classList.remove('loading');
                        stepEl.classList.add('completed');
                        statusEl.innerHTML = '<span class="checkmark-icon">‚úî</span>';

                        const textItems = stepEl.querySelectorAll('.plan-group-text');
                        textItems.forEach(el => el.style.display = 'none');
                    }

                    // Mark Progress as Accepted too? (Blue check in screenshot?)
                    if (progressAccordion) {
                        // progressAccordion.classList.remove('selected'); // Keep open? Or close?
                        // Screenshot has "Progress >" with checkmark. Usually implies closed.
                        // I will close it to match "end screen".
                        progressAccordion.classList.remove('selected');
                        progressAccordion.classList.add('accepted');
                    }

                    // Show Success
                    if (successMsg) {
                        successMsg.style.display = 'block';
                        if (inputWrapper) {
                            inputWrapper.style.display = 'block';
                        }
                        const chatHistory = document.querySelector('.chat-history');
                        if (chatHistory) chatHistory.scrollTop = chatHistory.scrollHeight;
                    }
                });
            }
        });
    </script>
</body>

</html>